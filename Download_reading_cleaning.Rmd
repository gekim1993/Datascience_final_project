---
title: "Reading_dataset"
author: "Junting Ren Uni:jr3755"
date: "November 20, 2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(rvest)
library(httr)
library(readxl)
library(data.table)
library(stringr)
```

```{r reading the New York Inspection data}
rest_inspection = GET("https://data.cityofnewyork.us/resource/9w7m-hzhe.csv") %>% 
  content("parsed") %>% 
  setnames(., "zipcode", "zip_codes")
  
```

```{r}
download.file("https://www1.nyc.gov/assets/doh/downloads/excel/episrv/2015_CHP_PUD.xlsx", mode="wb", destfile = "health.xlsx")
health <- read_excel("health.xlsx", sheet = "CHP_all_data") %>% 
  select(Name, Racewhite_Rate, Raceblack_rate, Raceasian_rate, 
         Racehispanic_rate, Raceother_rate, Poverty, Unemployment,
         Smoking, Sugary_Drink, Fruit_Veg, Exercise,
         Obesity, Diabetes, Stroke_Hosp)
```

```{r defining_fastfood}
rest_inspection %>%
  mutate(dba = str_to_upper(dba),
         dba = str_replace(dba, "//'", "")) %>%
  distinct(dba, cuisine_description) %>%
  arrange(dba)
  
  group_by(cuisine_description) %>%
  summarise(n = n())

rest_inspection %>%
  distinct(dba, cuisine_description) %>%
  arrange(dba)

Bagels/Pretzels
Bottled beverages, including water, sodas, juices, etc.
Donuts
Hamburgers
Hotdogs
Ice Cream, Gelato, Yogurt, Ices
Pizza
Chicken

rest_inspection %>%
  filter(cuisine_description == "Chicken") %>%
  distinct(dba)

```

```{r counting_fastfood}
rest_inspection %>%
  filter(cuisine_description %in% c("Bagels/Pretzels",
                                    "Bottled beverages, including water, sodas, juices, etc.",
                                    "Chicken",
                                    "Donuts",
                                    "Hamburgers",
                                    "Hotdogs",
                                    "Ice Cream, Gelato, Yogurt, Ices",
                                    "Pizza")
         ) %>%
  group_by(boro, ) %>%
  summarise(n_fastfood = n())
```